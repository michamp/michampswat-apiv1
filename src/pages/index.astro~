---
import Layout from '../layouts/Layout.astro';
import { Icon } from 'astro-icon/components';
import type { FbiType,FbiImageType,FbiCoordinateType,FbiFileType } from "../types/fbiTypes.ts";

interface NewsDataInterface 
{
	index:string;
	insertiontime:string;
	title:string;
	date:string;
	link:string;

};

var fbiNews:Array<NewsDataInterface> = [];
var fbiNewsArray:Array<NewsDataInterface> = [];

var fbiTopTenMostWanted:Array<FbiType> = [];
var fbiTTMWArray:Array<FbiType> = [];
try 
{
	const fbiNewsJson:string = Astro.url.origin + "/michamp-fbinews-rapidapi-06202024-1756PM.json";
	console.log("fbiNewsJson: " +fbiNewsJson);
	const res = await fetch(fbiNewsJson) 
	fbiNews = await res.json()
	console.log("fbiNews=" + fbiNews)
	if(fbiNews != undefined && fbiNews.length > 0)
	{
		fbiNewsArray = fbiNews.slice(0);
	}
	
	console.log("fbiNewsArray=" + fbiNewsArray)
		
	const fbiTTJson:string = Astro.url.origin + "/michamp-fbitopten-rapidapi-06172024-1239PM.json";
	console.log("fbiTTJson: " + fbiTTJson);
	const resTTMW = await fetch(fbiTTJson) 
	console.log("resTTMW=" + resTTMW)
	
	fbiTopTenMostWanted = await resTTMW.json()
	console.log("fbiTopTenMostWanted=" + fbiTopTenMostWanted)
	if(fbiTopTenMostWanted != undefined && fbiTopTenMostWanted.length > 0)
	{

		fbiTTMWArray = fbiTopTenMostWanted.slice(0);
	}
	
	console.log("fbiTopTenMostWanted=" + fbiTopTenMostWanted)
	console.log("fbiTTMWArray=" + fbiTTMWArray)
	
	//Build Overview Stats of Current FBI Top Ten 
	var numOfAwards:number = 0; 
	var numOfCaptured:number = 0; 
	var numOfLocated:number = 0; 
	var numOfRecovered:number = 0; 
	var numOfSurrendered:number = 0; 
	var numOfDeceased:number = 0; 
	
	fbiTTMWArray.map((fugitive) =>
	{
		if(fugitive.reward_text != undefined && fugitive.reward_text != null 
		   && fugitive.reward_text.length > 0)
		{
			numOfAwards++;
		}
		
		// Status field possible values:
		// na, captured, recovered, located, surrendered, deceased
		if(fugitive.status != undefined && fugitive.status != null 
		   && fugitive.status.length > 0)
		{
			if(fugitive.status.toLocaleLowerCase() === "captured")
			{
				numOfCaptured++;
			}
			
			if(fugitive.status.toLocaleLowerCase() === "located")
			{
				numOfCaptured++;
			}
			
			if(fugitive.status.toLocaleLowerCase() === "recovered")
			{
				numOfRecovered++;
			}
			
			if(fugitive.status.toLocaleLowerCase() === "surrendered")
			{
				numOfSurrendered++;
			}
			
			if(fugitive.status.toLocaleLowerCase() === "deceased")
			{
				numOfDeceased++;
			}
			

		}
		
		
	});
} 
catch (error) 
{
  console.error(error);
  
}


---

<Layout title="MICHAMP SWAT API V1 Template">
		<main>
		

<nav id="header" class="bg-black fixed w-full z-10 top-0 shadow">
	

		<div class="w-full container mx-auto flex flex-wrap items-center mt-0 pt-3 pb-3 md:pb-0">
				
			<div class="w-1/2 pl-2 md:pl-0">
				<a class="text-gray-100 text-base xl:text-xl no-underline hover:no-underline font-bold"  href="/"> 
					SWAT Template
				</a>
            </div>
			<div class="w-1/2 pr-0">
				<div class="flex relative inline-block float-right">
				
				  <div class="relative text-sm text-gray-100 dropdown 
				  z-30 ">
				  
					  <div tabindex={0} role="button" class="btn btn-ghost btn-square ">
					  	<Icon name="ri:menu-fill" class="text-2xl"/>
					  </div>
					  <ul tabindex={0} class="list-reset menu menu-sm dropdown-content mt-3 z-[1] 
		      p-2 shadow bg-base-100  w-15">
							<li><a href="#" class="px-4 py-2 block text-gray-100 hover:bg-gray-800 no-underline hover:no-underline tooltip tooltip-bottom" data-tip="account"><Icon name="ri:settings-5-line" class="text-2xl" /></a></li>
							
							<li>
							<a href="/michamp-fbitopten-rapidapi-06172024-1239PM.json" class="px-4 py-2 block text-gray-100 hover:bg-gray-800 no-underline hover:no-underline tooltip tooltip-bottom" data-tip="data" target="_blank"><Icon name="ri:database-2-line" class="text-2xl" /></a></li>
							
							<li><hr class="border-t mx-2 border-gray-400"></li>
							<li><a href="#" class="px-4 py-2 block text-gray-100 hover:bg-gray-800 no-underline hover:no-underline tooltip tooltip-top" data-tip="logout"><Icon name="ri:logout-box-line" class="text-2xl" /></a></li>
		</ul>
		
		
		
		<div id="userMenu" class="bg-gray-900 rounded shadow-md mt-2 absolute mt-12 top-0 right-0 min-w-full overflow-auto z-30 invisible dropdown"></div>
				  </div>


	<div class="block lg:hidden pr-4">
					<button id="nav-toggle" class="flex items-center px-3 py-2 border rounded text-gray-500 border-gray-600 hover:text-gray-100 hover:border-teal-500 appearance-none focus:outline-none">
						<svg class="fill-current h-3 w-3" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><title>Menu</title><path d="M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"/></svg>
					</button>
				</div>
				</div>

			</div>







			<div class="w-full flex-grow lg:flex lg:items-center lg:w-auto hidden lg:block mt-2 lg:mt-0 bg-black-900 z-20" id="nav-content">
		<ul class="list-reset lg:flex flex-1 items-center px-4 md:px-0">
					<li class="mr-6 my-2 md:my-0">
                        <a href="#" class="block py-1 md:py-3 pl-1 align-middle text-red-500 no-underline hover:text-gray-100 border-b-2 border-red-500 hover:border-white">
                            <Icon name="carbon:dashboard" class="text-lg" /> <span class="pb-1 md:pb-0 text-sm">DASH</span>
                        </a>
                    </li>
                    <li class="mr-6 my-2 md:my-0">
                        <a href="#" class="block py-1 md:py-3 pl-1 align-middle text-gray-500 no-underline hover:text-gray-100 border-b-2 border-gray-900  hover:border-white">
                            <Icon name="ri:police-badge-line" class="text-lg" /><span class="pb-1 md:pb-0 text-sm">DOJ</span>
                        </a>
                    </li>
					<li class="mr-6 my-2 md:my-0">
                        <a href="#" class="block py-1 md:py-3 pl-1 align-middle text-gray-500 no-underline hover:text-gray-100 border-b-2 border-gray-900  hover:border-white">
                            <Icon name="ri:police-badge-line" class="text-lg" /><span class="pb-1 md:pb-0 text-sm">FBI</span>
                        </a>
                    </li>
                    <li class="mr-6 my-2 md:my-0">
                        <a href="#" class="block py-1 md:py-3 pl-1 align-middle text-gray-500 no-underline hover:text-gray-100 border-b-2 border-gray-900  hover:border-white">
                            <Icon name="ri:building-4-line" class="text-lg" /><span class="pb-1 md:pb-0 text-sm">DHS</span>
                        </a>
                    </li>
                    <li class="mr-6 my-2 md:my-0">
                        <a href="#" class="block py-1 md:py-3 pl-1 align-middle text-gray-500 no-underline hover:text-gray-100 border-b-2 border-gray-900  hover:border-white">
                            <Icon name="ri:global-line" class="text-lg" /><span class="pb-1 md:pb-0 text-sm">INTERPOL</span>
                        </a>
                    </li>
                    <li class="mr-6 my-2 md:my-0">
                        <a href="#" class="block py-1 md:py-3 pl-1 align-middle text-gray-500 no-underline hover:text-gray-100 border-b-2 border-gray-900  hover:border-white">
                            <Icon name="ri:signal-wifi-error-line" class="text-lg" /><span class="pb-1 md:pb-0 text-sm">CYBER</span>
                        </a>
                    </li>
		</ul>
				
			
			
			
			
			
			
				
		<div class="relative pull-right  pl-4 pr-4 md:pr-0">
                    <input type="search" placeholder="Search" class="w-full bg-black-900 text-sm text-gray-400 transition border border-gray-800 focus:outline-none focus:border-gray-600 rounded py-1 px-2 pl-10 appearance-none leading-normal">
                    <div class="absolute search-icon" style="top: 0.375rem;left: 1.75rem;">
                        <svg class="fill-current pointer-events-none text-gray-500 w-4 h-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
                            <path d="M12.9 14.32a8 8 0 1 1 1.41-1.41l5.35 5.33-1.42 1.42-5.33-5.34zM8 14A6 6 0 1 0 8 2a6 6 0 0 0 0 12z"></path>
                        </svg>
                    </div>
                </div>
				
			</div>
			
		</div>
	</nav>
	
	
	
	
	

	<!--Container-->
	<div class="container w-full mx-auto pt-40">
		
		<div class="w-full px-4 md:px-0 md:mt-8 mb-16 text-gray-800 leading-normal">
			
			<!--Console Content-->
			
			<div class="flex flex-wrap">
                <div class="w-full md:w-1/2 xl:w-1/3 p-3">
                    <!--Metric Card-->
                    <div class="bg-black border border-gray-600 rounded shadow p-2">
                        <div class="flex flex-row items-center">
                            <div class="flex-shrink pr-4">
                                <div class="rounded p-3 bg-slate-600"><Icon name="ri:money-dollar-box-line" class="text-white text-3xl" /></div>
                            </div>
                            
                            <div class="flex-1 text-center md:text-center">
                                <h5 class="font-bold uppercase text-white">Awards Available</h5>
                                <h3 class="font-bold text-3xl text-gray-600">{numOfAwards}<span class="text-green-500"><!--<i class="fas fa-caret-up"></i>--></span></h3>
                            </div>
                        </div>
                    </div>
                    <!--/Metric Card-->
                </div>
                <div class="w-full md:w-1/2 xl:w-1/3 p-3">
                    <!--Metric Card-->
                    <div class="bg-black border border-gray-600 rounded shadow p-2">
                        <div class="flex flex-row items-center">
                            <div class="flex-shrink pr-4">
                                <div class="rounded p-3 bg-slate-600"><Icon name="ri:lock-2-line" class="text-white text-3xl" /></div>
                            </div>
                            <div class="flex-1 text-center md:text-center">
                                <h5 class="font-bold uppercase text-white">Captured</h5>
                                <h3 class="font-bold text-3xl text-gray-600">{numOfCaptured}<span class="text-pink-500"><!--<i class="fas fa-exchange-alt"></i>--></span></h3>
                            </div>
                        </div>
                    </div>
                    <!--/Metric Card-->
                </div>
                <div class="w-full md:w-1/2 xl:w-1/3 p-3">
                    <!--Metric Card-->
                    <div class="bg-black border border-gray-600 rounded shadow p-2">
                        <div class="flex flex-row items-center">
                            <div class="flex-shrink pr-4">
                                <div class="rounded p-3 bg-slate-600"><Icon name="ri:kanban-view-2" class="text-white text-3xl" /></div>
                            </div>
                            <div class="flex-1 text-center md:text-center">
                                <h5 class="font-bold uppercase text-white">Recovered</h5>
                                <h3 class="font-bold text-3xl text-gray-600">{numOfRecovered}<span class="text-yellow-600"><!--<i class="fas fa-caret-up"></i>--></span></h3>
                            </div>
                        </div>
                    </div>
                    <!--/Metric Card-->
                </div>
                <div class="w-full md:w-1/2 xl:w-1/3 p-3">
                    <!--Metric Card-->
                    <div class="bg-black border border-gray-600 rounded shadow p-2">
                        <div class="flex flex-row items-center">
                            <div class="flex-shrink pr-4">
                                <div class="rounded p-3 bg-slate-600"><Icon name="ri:flag-fill" class="text-white text-3xl" /></div>
                            </div>
                            <div class="flex-1 text-center md:text-center">
                                <h5 class="font-bold uppercase text-white">Surrendered</h5>
                                <h3 class="font-bold text-3xl text-gray-600">{numOfSurrendered}</h3>
                            </div>
                        </div>
                    </div>
                    <!--/Metric Card-->
                </div>
                <div class="w-full md:w-1/2 xl:w-1/3 p-3">
                    <!--Metric Card-->
                    <div class="bg-black border border-gray-600 rounded shadow p-2">
                        <div class="flex flex-row items-center">
                            <div class="flex-shrink pr-4">
                                <div class="rounded p-3 bg-slate-600"><Icon name="ri:user-forbid-line" class="text-white text-3xl" /></div>
                            </div>
                            <div class="flex-1 text-center md:text-center">
                                <h5 class="font-bold uppercase text-white">Deceased</h5>
                                <h3 class="font-bold text-3xl text-gray-600">{numOfDeceased}</h3>
                            </div>
                        </div>
                    </div>
                    <!--/Metric Card-->
                </div>
                
                <div class="w-full md:w-1/2 xl:w-1/3 p-3">
                    <!--Metric Card
                    <div class="bg-black border border-gray-600 rounded shadow p-2">
                        <div class="flex flex-row items-center">
                            <div class="flex-shrink pr-4">
                                <div class="rounded p-3 bg-red-600"><i class="fas fa-inbox fa-2x fa-fw fa-inverse"></i></div>
                            </div>
                            <div class="flex-1 text-right md:text-center">
                                <h5 class="font-bold uppercase text-gray-400">Issues</h5>
                                <h3 class="font-bold text-3xl text-gray-600">3 <span class="text-red-500"><i class="fas fa-caret-up"></i></span></h3>
                            </div>
                        </div>
                    </div>
                    /Metric Card-->
                </div>
            </div>


			<!--Divider-->
			<hr class="border-b-2 border-gray-600 my-8 mx-4">
			
	<!-- START: FBI Top Ten Content-->
			
	<div class="flex flex-wrap">
                <h1 class="font-bold uppercase text-4xl text-white">FBI Top Ten Most Wanted</h1>
                
                {

		       fbiTTMWArray.map((fugitive:FbiType,index:number) => (

			
			<!--<div class="w-full md:w-1/2 xl:w-1/3 p-3">-->
			<div class="w-full p-3">
		            <!--Fugitive Card-->
		            <div class="bg-red-600 border border-red-500 rounded shadow p-2 h-50">
		                <div class="flex flex-row items-center">
		                    <div class="flex-shrink pr-4">
		                        <div class="rounded p-3 bg-white">
		                        
		                        <h5 class="text-4xl text-red-600 font-bold uppercase">{index+1}</h5>	
		                        <Icon name="ri:run-fill" class="text-4xl text-red-600" />
		                        </div>
		                    </div>
		                    
		                    <div class="flex-1 text-center md:text-center">
		                    		<h5 class="font-bold uppercase text-red-500 bg-white">{fugitive.warning_message}</h5>
		                    		<h3 class="font-bold text-2xl text-white">{fugitive.title}</h3>
		                        <h5 class="font-bold uppercase text-white">Published:{fugitive.publication}</h5>

		                        
			<!--<a class="text-lg ml-6" href={fugitive.link} set:html={fugitive.link} target="_blank"/>-->
			
		                        
		                    </div>
		                </div>
		            </div>
		            <!--/Fugitive Card-->
		        </div>
		    ))
		}
		
                
            </div>
<!-- END: FBI Top Ten Content-->

			

            </div>
								
			<!--/ Console Content-->
					
		</div>
		

	</div> 
	<!--/container-->
	
	

<script>
	
	
	/*Toggle dropdown list*/


	var userMenuDiv:any = document.getElementById("userMenu");
	var userMenu:any = document.getElementById("userButton");
	
	var navMenuDiv:any = document.getElementById("nav-content");
	var navMenu:any = document.getElementById("nav-toggle");
	
	document.onclick = check;

	function check(e:any){
	  var target = (e && e.target) || (event && event.srcElement);

	  //User Menu
	  if (!checkParent(target, userMenuDiv)) {
		// click NOT on the menu
		if (checkParent(target, userMenu)) {
		  // click on the link
		  if (userMenuDiv.classList.contains("invisible")) {
			userMenuDiv.classList.remove("invisible");
		  } else {userMenuDiv.classList.add("invisible");}
		} else {
		  // click both outside link and outside menu, hide menu
		  userMenuDiv.classList.add("invisible");
		}
	  }
	  
	  //Nav Menu
	  if (!checkParent(target, navMenuDiv)) {
		// click NOT on the menu
		if (checkParent(target, navMenu)) {
		  // click on the link
		  if (navMenuDiv.classList.contains("hidden")) {
			navMenuDiv.classList.remove("hidden");
		  } else {navMenuDiv.classList.add("hidden");}
		} else {
		  // click both outside link and outside menu, hide menu
		  navMenuDiv.classList.add("hidden");
		}
	  }
	  
	}

	function checkParent(t:any, elm:any) {
	  while(t.parentNode) {
		if( t == elm ) {return true;}
		t = t.parentNode;
	  }
	  return false;
	}


</script>

		</main>
	</Layout>




